<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <!-- Header con fragmentación -->
  <head th:insert="~{fragments/header :: header}"></head>

  <body>
    <!-- Navar con fragmentación-->
    <div th:insert="~{fragments/header :: navbar}"></div>

    <!-- Catálogo Libros -->

    <article>
      <h1 class="mb-4">Detalles Libro</h1>

      <table class="table table-striped table-bordered">
        <tbody>
          <tr>
            <!-- Primera celda de cada fila: Imagen de portada -->
            <td rowspan="8" class="text-center align-middle">
              <img
                th:src="@{'/libros/files/' + ${libro.portada}}"
                alt="Portada del libro"
                class="img-fluid rounded shadow-lg"
                style="max-width: 250px"
              />
            </td>
            <td><strong>Id:</strong> <span th:text="${libro.id}"></span></td>
          </tr>
          <tr>
            <td>
              <strong>Título:</strong> <span th:text="${libro.titulo}"></span>
            </td>
          </tr>
          <tr>
            <td>
              <strong>Autor:</strong> <span th:text="${libro.autor}"></span>
            </td>
          </tr>
          <tr>
            <td>
              <strong>Sinopsis:</strong>
              <span th:text="${libro.sinopsis}"></span>
            </td>
          </tr>
          <tr>
            <td>
              <strong>Género:</strong>
              <span th:text="${libro.genero.nombre}"></span>
            </td>
          </tr>
          <tr>
            <td>
              <strong>Año:</strong> <span th:text="${libro.annio}"></span>
            </td>
          </tr>
          <tr>
            <td>
              <strong>Fecha Alta:</strong>
              <span th:text="${libro.fechaDeAlta}"></span>
            </td>
          </tr>
          <!-- Fila para los botones  -->
          <tr>
            <td class="text-center" colspan="2">
              <a
                class="btn btn-warning btn-sm"
                th:href="@{/libros/edit/{id}(id=${libro.id})}"
                >Editar</a
              >
              <a
                class="btn btn-danger btn-sm"
                th:href="@{/libros/delete/{id}(id=${libro.id})}"
                onclick="return confirm('¿Estás seguro de que deseas eliminar este libro?')"
                >Borrar</a
              >
            </td>
          </tr>
        </tbody>
      </table>
    </article>

    <!-- TABLA DE VALORACIONES DEL LIBRO -->
    <article>
      <h1 class="mb-4">Valoraciones</h1>

      <table class="table table-striped table-bordered">
        <tbody>
          <tr>
            <td>
              <strong>Valoración: </strong>
              <span th:text="${libro.mediaValoracion}"></span>
            </td>
          </tr>
          <tr>
            <td>
              <strong>Opiniones:</strong>
            </td>
          </tr>

          <tr th:each="valoracion:${listaValoraciones}">
            <td th:text="${valoracion.comentarios}"></td>
          </tr>
        </tbody>
      </table>
    </article>

    <footer>
      &copy;
      <span th:text="${year}">3000</span>
      - Mercedes Amor
    </footer>
  </body>
</html>
